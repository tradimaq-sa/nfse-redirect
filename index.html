<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <title>Redirecionando...</title>

    <script>
    (function () {

        // 1️⃣ tenta pegar pela query string (?chave=)
        const params = new URLSearchParams(window.location.search);
        let chave = params.get("chave");

        // 2️⃣ se não existir, pega pelo PATH (/CHAVE)
        if (!chave) {
            const path = window.location.pathname;
            chave = path.split("/").filter(Boolean).pop();
        }

        // 3️⃣ validação (somente números)
        if (!chave || !/^\d+$/.test(chave)) {
            document.addEventListener("DOMContentLoaded", function () {
                document.body.innerHTML = "<p>Chave inválida ou não informada.</p>";
            });
            return;
        }

        // 4️⃣ monta URL final
        const url = "https://www.nfse.gov.br/ConsultaPublica/?tpc=1&chave=" + chave;

        // 5️⃣ redireciona
        window.location.replace(url);

    })();
    </script>
</head>
<body>
    <p>Redirecionando para a Nota Fiscal...</p>
</body>
</html>
